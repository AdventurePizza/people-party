{"version":3,"sources":["Cursor.tsx","firebaseContext.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","display","sizeBig","width","spacing","height","sizeSmall","Cursor","props","avatar","username","userCursorRef","classes","ref","className","style","position","overflow","Avatar","variant","src","alt","textAlign","defaultProps","shouldShowIsActive","Cursors","x","y","top","left","FirebaseContext","React","createContext","getProfile","Promise","resolve","isSuccessful","setProfile","getBgFirebase","setBgFirebase","fetchBase","FirebaseProvider","children","useCallback","address","a","fetch","method","fetchRes","ok","json","headers","body","JSON","stringify","message","statusText","background","Provider","value","socketURL","window","location","hostname","socket","io","transports","dAppClient","DAppClient","name","App","useContext","useState","activeAccount","setActiveAccount","synced","setSynced","showUnsync","setShowUnsync","isMobile","innerWidth","showPanel","setShowPanel","collections","setCollections","setUsername","setAvatar","createRef","userLocations","setUserLocations","setBackground","bgSwitch","setBgSwitch","emit","useEffect","then","res","console","log","onCursorMove","clientId","clientProfile","innerHeight","absoluteX","absoluteY","onBgChange","onRoomateDisconnect","newUserLocations","on","off","fetchGraphQL","operationsDoc","operationName","variables","query","result","ress","addr","query_collection","errors","data","error","hic_et_nunc_token_holder","fetchCollection","HashToURL","hash","type","undefined","replace","subdomain","ipfsClient","CID","toV1","toBaseEncodedString","err","getDomain","reverseRecord","domain","updateCursorPosition","useMemo","_","throttle","onMouseMove","event","clientX","clientY","current","getActiveAccount","clearActiveAccount","sync","requestPermissions","permissions","addEventListener","slice","getAcc","backgroundImage","backgroundPosition","backgroundRepeat","Object","entries","map","key","fontSize","alignItems","paddingLeft","backgroundColor","overflowY","token","IconButton","onClick","display_uri","id","marginRight","Button","title","size","justifyContent","unsync","Switch","checked","onChange","target","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.75f3b6ca.chunk.js","sourcesContent":["// @ts-nocheck\nimport React from 'react';\nimport { makeStyles, Avatar, createStyles, Theme } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    sizeBig: {\n      width: theme.spacing(12),\n      height: theme.spacing(12),\n    },\n    sizeSmall: {\n      width: theme.spacing(6),\n      height: theme.spacing(6),\n    },\n  }),\n);\n\nexport const Cursor = (props) => {\n  const {\n    avatar,\n    username,\n    userCursorRef\n  } = props;\n  const classes = useStyles();\n  return (\n    <div ref={userCursorRef} className={props.className} style={{ position: \"absolute\", overflow: \"hidden\" }}>\n      <Avatar variant=\"rounded\" src={avatar} alt=\"change avatar\" className={classes.sizeSmall} />\n      <div style={{ textAlign: \"center\" }} >{username} </div>\n    </div>\n  );\n};\n\nCursor.defaultProps = {\n  shouldShowIsActive: true\n};\n\nexport const Cursors = (props) => {\n  const {\n    avatar,\n    x,\n    y,\n    username,\n  } = props;\n  const classes = useStyles();\n  return (\n    <div className={props.className} style={{ position: \"absolute\", top: (y), left: x, overflow: \"hidden\" }}>\n      <Avatar variant=\"rounded\" src={avatar} alt=\"change avatar\" className={classes.sizeSmall} />\n      <div style={{ textAlign: \"center\" }} >{username} </div>\n    </div>\n  );\n};\n\n","// @ts-nocheck\nimport React, { useCallback } from 'react';\n\n\nexport interface IFirebaseContext {\n\tgetProfile: (address: string) => Promise<IFetchResponseBase>;\n\tsetProfile: (address: string, username: string, avatar: string) => Promise<IFetchResponseBase>;\n\tgetBgFirebase: () => Promise<IFetchResponseBase>;\n\tsetBgFirebase: (background: string) => Promise<IFetchResponseBase>;\n}\n\nexport const FirebaseContext = React.createContext<IFirebaseContext>({\n\tgetProfile: () => Promise.resolve({ isSuccessful: false }),\n\tsetProfile: () => Promise.resolve({ isSuccessful: false }),\n\tgetBgFirebase: () => Promise.resolve({ isSuccessful: false }),\n\tsetBgFirebase: () => Promise.resolve({ isSuccessful: false }),\n});\n\nconst fetchBase =\n\tprocess.env.NODE_ENV === 'development'\n\t\t? 'http://localhost:8000'\n\t\t: 'https://peopleparty-server.herokuapp.com';\n\n\nexport const FirebaseProvider: React.FC = ({ children }) => {\n\n\tconst getProfile = useCallback(\n\t\tasync (address: string): Promise<IFetchResponseBase> => {\n\t\t\tconst fetchRes = await fetch(fetchBase + `/users/profile/${address}`, {\n\t\t\t\tmethod: 'GET'\n\t\t\t});\n\n\t\t\tif (fetchRes.ok) {\n\t\t\t\treturn await fetchRes.json();\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst setProfile = useCallback(\n\t\tasync (address: string, username: string, avatar: string): Promise<IFetchResponseBase> => {\n\t\t\tconst fetchRes = await fetch(fetchBase + `/users/profile/${address}`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ username: username, avatar: avatar })\n\t\t\t});\n\n\t\t\tif (fetchRes.ok) {\n\t\t\t\treturn { isSuccessful: true };\n\t\t\t}\n\n\t\t\treturn { isSuccessful: false, message: fetchRes.statusText };\n\t\t},\n\t\t[]\n\t);\n\n\tconst getBgFirebase = useCallback(\n\t\tasync (): Promise<IFetchResponseBase> => {\n\t\t\tconst fetchRes = await fetch(fetchBase + `/users/background`, {\n\t\t\t\tmethod: 'GET'\n\t\t\t});\n\n\t\t\tif (fetchRes.ok) {\n\t\t\t\treturn await fetchRes.json();\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst setBgFirebase = useCallback(\n\t\tasync (background: string): Promise<IFetchResponseBase> => {\n\t\t\tconst fetchRes = await fetch(fetchBase + `/users/background`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ background: background })\n\t\t\t});\n\n\t\t\tif (fetchRes.ok) {\n\t\t\t\treturn { isSuccessful: true };\n\t\t\t}\n\n\t\t\treturn { isSuccessful: false, message: fetchRes.statusText };\n\t\t},\n\t\t[]\n\t);\n\n\treturn (\n\t\t<FirebaseContext.Provider\n\t\t\tvalue={{\n\t\t\t\tgetProfile,\n\t\t\t\tsetProfile,\n\t\t\t\tgetBgFirebase,\n\t\t\t\tsetBgFirebase,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</FirebaseContext.Provider>\n\t);\n};\n","// @ts-nocheck\n\nimport \"./App.css\";\nimport React, {\n  useCallback,\n  useEffect,\n  useState,\n  useMemo,\n  useContext\n} from \"react\";\n\n//ui\nimport { Button, makeStyles, Avatar, IconButton, createStyles, Theme, Switch } from \"@material-ui/core\";\n\n//logic\nimport io from \"socket.io-client\";\nimport { DAppClient } from \"@airgap/beacon-sdk\";\nimport _ from \"underscore\";\nimport { Cursor, Cursors } from './Cursor';\nimport { FirebaseContext } from \"./firebaseContext\";\n\n\nconst socketURL =\n  window.location.hostname === \"localhost\"\n    ? \"ws://localhost:8000\"\n    : \"wss://peopleparty-server.herokuapp.com\";\n\nconst socket = io(socketURL, { transports: [\"websocket\"] });\nconst dAppClient = new DAppClient({ name: \"Beacon Docs\" });\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    sizeBig: {\n      width: theme.spacing(12),\n      height: theme.spacing(12),\n    },\n    sizeSmall: {\n      width: theme.spacing(6),\n      height: theme.spacing(6),\n    },\n  }),\n);\n\nfunction App() {\n\n  const classes = useStyles();\n  const { getProfile, setProfile, getBgFirebase, setBgFirebase } = useContext(FirebaseContext);\n  const [activeAccount, setActiveAccount] = useState();\n  const [synced, setSynced] = useState('sync');\n  const [showUnsync, setShowUnsync] = useState(false);\n  const isMobile = window.innerWidth <= 500;\n  const [showPanel, setShowPanel] = useState(true);\n  const [collections, setCollections] = useState([]);\n  const [username, setUsername] = useState(\"anon\");\n  const [avatar, setAvatar] = useState(\"https://ipfs.io/ipfs/QmVAiRHjVLPJYnf7jCpVeqrqRBE7HFN9nm5ZB2QSZ5BY52\");\n  const userCursorRef = React.createRef<HTMLDivElement>();\n  const [userLocations, setUserLocations] = useState({});\n  const [background, setBackground] = useState(\"\");\n  const [bgSwitch, setBgSwitch] = React.useState(false);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setBgSwitch(event.target.checked);\n  };\n\n\n  socket.emit('username', username);\n  socket.emit('avatar', avatar);\n\n\n\n  useEffect(() => {\n    getBgFirebase().then((res) => {\n      console.log(\"res \" + res)\n      if (res) {\n        setBackground(res.background);\n      }\n    });\n  }, [getBgFirebase]);\n\n\n  useEffect(() => {\n    getProfile(activeAccount ? activeAccount.address : \"\").then((res) => {\n      if (res) {\n        socket.emit('username', res.username);\n        socket.emit('avatar', res.avatar);\n        setUsername(res.username);\n        setAvatar(res.avatar);\n      }\n    });\n  }, [getProfile, activeAccount]);\n\n  const onCursorMove = useCallback(\n    function cursorMove(\n      clientId: string,\n      [x, y]: number[],\n      clientProfile: IUserProfile\n    ) {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      const absoluteX = width * x;\n      const absoluteY = height * y;\n\n\n      setUserLocations((userLocations) => {\n        const newUserLocations = {\n          ...userLocations,\n          [clientId]: {\n            ...userLocations[clientId],\n            x: absoluteX,\n            y: absoluteY,\n            avatar: clientProfile.avatar,\n            username: clientProfile.name,\n          }\n        };\n        return newUserLocations;\n      });\n    },\n    []\n  );\n\n  const onBgChange = useCallback(\n    function bgChange(\n      background: string,\n    ) {\n      setBackground(background)\n    },\n    []\n  );\n\n  useEffect(() => {\n    const onRoomateDisconnect = (clientId: string) => {\n      setUserLocations((userLocations) => {\n        const newUserLocations = {\n          ...userLocations\n        };\n        delete newUserLocations[clientId];\n\n        return newUserLocations;\n      });\n    };\n\n    socket.on('roommate disconnect', onRoomateDisconnect);\n    socket.on('cursor move', onCursorMove);\n    socket.on('background', onBgChange);\n\n    return () => {\n      socket.off('roomate disconnect', onRoomateDisconnect);\n      socket.off('cursor move', onCursorMove);\n      socket.off('background', onBgChange);\n    };\n  }, [onCursorMove, onBgChange]);\n\n  useEffect(() => {\n    async function fetchGraphQL(operationsDoc, operationName, variables) {\n      let result = await fetch('https://hdapi.teztools.io/v1/graphql', {\n        method: 'POST',\n        body: JSON.stringify({\n          query: operationsDoc,\n          variables: variables,\n          operationName: operationName,\n        }),\n      })\n\n      var ress = await result.json();\n      return ress;\n    }\n\n    async function fetchCollection(addr) {\n      const { errors, data } = await fetchGraphQL(\n        query_collection,\n        'collectorGallery',\n        { address: addr }\n      )\n      if (errors) {\n        console.error(errors)\n      }\n      const result = data ? data.hic_et_nunc_token_holder : null;\n      setCollections(result)\n      return result\n    }\n\n    if (activeAccount)\n      fetchCollection(activeAccount.address);\n  }, [activeAccount]);\n\n  const HashToURL = (hash, type) => {\n    // when on preview the hash might be undefined.\n    // its safe to return empty string as whatever called HashToURL is not going to be used\n    // artifactUri or displayUri\n    if (hash === undefined) {\n      return ''\n    }\n\n    switch (type) {\n      case 'HIC':\n        return hash.replace('ipfs://', 'https://pinata.hicetnunc.xyz/ipfs/')\n      case 'CLOUDFLARE':\n        return hash.replace('ipfs://', 'https://cloudflare-ipfs.com/ipfs/')\n      case 'PINATA':\n        return hash.replace('ipfs://', 'https://gateway.pinata.cloud/ipfs/')\n      case 'IPFS':\n        return hash.replace('ipfs://', 'https://ipfs.io/ipfs/')\n      case 'INFURA':\n        try {\n          var cidv1 = new ipfsClient.CID(hash.replace('ipfs://', '')).toV1()\n          var subdomain = cidv1.toBaseEncodedString('base32')\n          return `https://${subdomain}.ipfs.infura-ipfs.io/`\n        } catch (err) {\n          return undefined\n        }\n      case 'DWEB':\n        return hash.replace('ipfs://', 'http://dweb.link/ipfs/')\n      default:\n        console.error('please specify type')\n        return hash\n    }\n  }\n\n  //fetch wallet name if it exist for example, trydrum.tez\n  async function getDomain(address: string) {\n    let domain;\n    await fetch('https://api.tezos.domains/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: `\n            {\n              reverseRecord(address: \"`+ address + `\"){owner domain{name}}\n            }\n            `,\n        variables: {\n        },\n      }\n      ),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.data.reverseRecord) {\n          domain = result.data.reverseRecord.domain.name;\n          setSynced(domain);\n          setUsername(domain);\n        }\n      });\n  }\n\n  const updateCursorPosition = useMemo(\n    () =>\n      _.throttle((position: [number, number]) => {\n        socket.emit('cursor move', { x: position[0], y: position[1] });\n      }, 5),\n    []\n  );\n\n  const onMouseMove = useCallback(\n    (event: MouseEvent) => {\n      const x = event.clientX;\n      const y = event.clientY;\n\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n\n      const relativeX = (x - 60) / width;\n      const relativeY = (y - 60) / height;\n\n      updateCursorPosition([relativeX, relativeY]);\n\n      if (userCursorRef.current) {\n        userCursorRef.current.style.left = x + 20 + 'px';\n        userCursorRef.current.style.top = y + 20 + 'px';\n      }\n    },\n    [updateCursorPosition, userCursorRef]\n  );\n\n  useEffect(() => {\n    window.addEventListener('mousemove', onMouseMove);\n  }, [onMouseMove]);\n\n\n\n  useEffect(() => {\n    async function getAcc() {\n      setActiveAccount(await dAppClient.getActiveAccount());\n      if (activeAccount) {\n        setSynced(activeAccount.address.slice(0, 6) + \"...\" + activeAccount.address.slice(32, 36));\n        setUsername(activeAccount.address.slice(0, 6) + \"...\" + activeAccount.address.slice(32, 36));\n        setShowUnsync(true);\n        getDomain(activeAccount.address);\n      }\n      else {\n        setSynced('sync');\n        setShowUnsync(false);\n      }\n    }\n    getAcc();\n  }, [activeAccount]);\n\n\n\n  async function unsync() {\n    setActiveAccount(await dAppClient.getActiveAccount())\n    if (activeAccount) {\n      // User already has account connected, everything is ready\n      dAppClient.clearActiveAccount().then(async () => {\n        setActiveAccount(await dAppClient.getActiveAccount())\n        setSynced('sync');\n        setUsername(\"anon\");\n        setShowUnsync(false);\n      });\n    }\n  }\n\n  async function sync() {\n    setActiveAccount(await dAppClient.getActiveAccount())\n    //Already connected\n    if (activeAccount) {\n      setSynced(activeAccount.address)\n      setShowUnsync(true);\n      getDomain(activeAccount.address);\n\n      return activeAccount;\n    }\n    // The user is not synced yet\n    else {\n      try {\n        console.log(\"Requesting permissions...\");\n        const permissions = await dAppClient.requestPermissions();\n        setActiveAccount(await dAppClient.getActiveAccount())\n        console.log(\"Got permissions:\", permissions.address);\n        setSynced(permissions.address)\n        setShowUnsync(true);\n\n        getDomain(permissions.address);\n\n      }\n      catch (error) {\n        console.log(\"Got error:\", error);\n      }\n    }\n  }\n\n\n\n  return (\n    <>\n      <Cursor avatar={avatar} userCursorRef={userCursorRef} username={username} />\n      <div style={{\n        height: isMobile ? \"92vh\" : \"100vh\",\n        backgroundImage: `url(${background})`,\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n\n      }} >\n        {userLocations && Object.entries(userLocations).map(([key]) => (\n          <Cursors x={userLocations[key].x} y={userLocations[key].y} avatar={userLocations[key].avatar} username={userLocations[key].username} />\n        )\n        )\n        }\n\n\n        <div className=\"top-left\" style={{ fontSize: isMobile ? \"1.5em\" : \"3em\", display: \"flex\", alignItems: \"center\", paddingLeft: 10 }} >\n          people party\n\n        </div>\n\n        <div>\n\n        </div>\n\n        <div className=\"bottom\" style={{ position: \"absolute\", backgroundColor: \"white\" }} >\n          <div   >\n            {showPanel &&\n              <div className=\"panel\" style={{ display: \"flex\", width: \"100%\", overflowY: \"auto\" }}>\n                {collections &&\n                  collections.map(({ token }) => (\n                    <IconButton\n                      key={token.id}\n                      onClick={() => {\n                        if (bgSwitch) {\n                          setBackground(HashToURL(token.display_uri, 'IPFS'));\n                          socket.emit('background', HashToURL(token.display_uri, 'IPFS'));\n                          setBgFirebase(HashToURL(token.display_uri, 'IPFS'))\n                        }\n                        else {\n                          setAvatar(HashToURL(token.display_uri, 'IPFS'));\n                          socket.emit('avatar', HashToURL(token.display_uri, 'IPFS'));\n                          setProfile(activeAccount.address, username, HashToURL(token.display_uri, 'IPFS'));\n                        }\n\n                      }}\n                    >\n                      <Avatar variant=\"rounded\" src={HashToURL(token.display_uri, 'IPFS')} alt={token.id} className={classes.sizeBig} />\n\n                    </IconButton>\n                  ))\n                }\n              </div>\n            }\n          </div>\n          <div style={{ display: \"flex\" }}>\n            <div style={{ marginRight: \"auto\" }}>\n              <Button title={\"Adventure Networks\"} size={isMobile ? \"small\" : \"medium\"} onClick={() => { }} >  <div style={{ textAlign: \"left\" }}> Adventure <br></br>Networks </div> </Button>\n            </div>\n\n            <div style={{ display: \"flex\", alignItems: \"end\", justifyContent: \"flex-end\" }}>\n\n              <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"flex-end\" }}>\n\n\n                {showUnsync && <Button size={isMobile ? \"small\" : \"medium\"} title={\"unsync\"} onClick={() => { unsync() }} ><u>unsync</u> </Button>}\n\n                {showUnsync && <div> | </div>}\n                <Button title={\"sync\"} size={isMobile ? \"small\" : \"medium\"} onClick={async () => { await sync(); }} ><u>{synced}</u> </Button>\n                {showUnsync && <><div> | </div>\n                  <Button size={isMobile ? \"small\" : \"medium\"} title={\"unsync\"} onClick={() => { setShowPanel(!showPanel) }} >\n                    <Avatar variant=\"rounded\" src={avatar} alt=\"change avatar\" className={classes.sizeSmall} />\n                  </Button>\n                  |\n                  <Switch checked={bgSwitch} onChange={handleChange} />\n                  <b> Background </b>   &nbsp;\n                </>\n                }\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </>\n  );\n}\n\nexport default App;\n\nconst query_collection = `\nquery collectorGallery($address: String!) {\n  hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, token: {creator: {address: {_neq: $address}}}, quantity: {_gt: \"0\"}}, order_by: {token_id: desc}) {\n\ttoken {\n\t  id\n\t  artifact_uri\n\t  display_uri\n\t  thumbnail_uri\n\t  timestamp\n\t  mime\n\t  title\n\t  description\n\t  supply\n\t  royalties\n\t  creator {\n\t\taddress\n\t  }\n\t}\n  }\n}\n`","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import \"./index.css\";\n\nimport App from \"./App\";\nimport { FirebaseProvider } from \"./firebaseContext\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <FirebaseProvider>\n    <App />\n  </FirebaseProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}