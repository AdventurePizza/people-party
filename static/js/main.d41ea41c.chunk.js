(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{214:function(e,t){},319:function(e,t,n){},321:function(e,t,n){},351:function(e,t){},353:function(e,t){},363:function(e,t){},365:function(e,t){},391:function(e,t){},393:function(e,t){},394:function(e,t){},400:function(e,t){},402:function(e,t){},419:function(e,t){},421:function(e,t){},433:function(e,t){},436:function(e,t){},465:function(e,t){},467:function(e,t){},487:function(e,t){},491:function(e,t){},505:function(e,t){},517:function(e,t){},532:function(e,t,n){"use strict";n.r(t);var r=n(13),a=(n(319),n(0)),s=n.n(a),c=n(41),i=n(4),o=n(58),u=n(24),l=(n(321),n(1)),d=n.n(l),f=n(559),p=n(585),h=n(581),j=n(579),b=n(580),m=n(586),v=n(290),O=n.n(v),x=n(28),w=n(302),y=Object(f.a)((function(e){return Object(p.a)({root:{display:"flex"},sizeBig:{width:e.spacing(12),height:e.spacing(12)},sizeSmall:{width:e.spacing(6),height:e.spacing(6)}})})),g=function(e){var t=e.avatar,n=e.username,a=e.userCursorRef,s=y();return Object(r.jsxs)("div",{ref:a,className:e.className,style:{position:"absolute",overflow:"hidden"},children:[Object(r.jsx)(m.a,{variant:"rounded",src:t,alt:"change avatar",className:s.sizeSmall}),Object(r.jsxs)("div",{style:{textAlign:"center"},children:[n," "]})]})};g.defaultProps={shouldShowIsActive:!0};var k=Object(l.createContext)({jwt:"",fetchJWT:function(){}}),S=function(e){var t=e.children,n=Object(l.useState)(""),a=Object(u.a)(n,2),i=a[0],o=a[1],d=Object(l.useCallback)(Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://peopleparty-server.herokuapp.com/users/login",{method:"GET"}).catch((function(e){return console.error("Error:",e),!1}));case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return n=e.sent,o(n._token),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),[i]);return Object(l.useEffect)((function(){d()}),[d,i]),Object(r.jsx)(k.Provider,{value:{jwt:i,fetchJWT:d},children:t})},C=d.a.createContext({getProfile:function(){return Promise.resolve({isSuccessful:!1})},setProfile:function(){return Promise.resolve({isSuccessful:!1})},claim:function(){return Promise.resolve({isSuccessful:!1})},prepareMint:function(){return Promise.resolve({isSuccessful:!1})}}),P=function(e){var t=e.children,n=Object(l.useContext)(k).jwt,a=Object(l.useCallback)((function(e,t){return fetch("https://peopleparty-server.herokuapp.com"+e,Object(o.a)(Object(o.a)({},t),{},{headers:n?Object(o.a)(Object(o.a)({},t.headers),{},{Authorization:"Bearer "+n}):Object(o.a)({},t.headers)}))}),[n]),i=Object(l.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),u=Object(l.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/users/profile/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,avatar:r})});case 2:if(!(c=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:c.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[a]),d=Object(l.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/users/claim/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),f=Object(l.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/users/prepareMint/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiver:n,message:r})});case 2:if(!(c=e.sent).ok){e.next=7;break}return e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[a]);return Object(r.jsx)(C.Provider,{value:{getProfile:i,setProfile:u,claim:d,prepareMint:f},children:t})},_=n(305),A=n(306),z=new _.a("https://mainnet.api.tez.ie"),N=new A.a({name:"hicetnunc.xyz",preferblackNetwork:"mainnet"});z.setWalletProvider(N);var T="localhost"===window.location.hostname?"ws://localhost:8000":"wss://peopleparty-server.herokuapp.com",E=O()(T,{transports:["websocket"]}),I=new x.i({name:"Beacon Docs"}),R=Object(f.a)((function(e){return Object(p.a)({root:{display:"flex"},sizeBig:{width:e.spacing(12),height:e.spacing(12)},sizeSmall:{width:e.spacing(6),height:e.spacing(6)}})}));var q=function(){var e=R(),t=Object(l.useContext)(C),n=t.getProfile,a=t.setProfile,f=(t.claim,t.prepareMint),p=Object(l.useContext)(k).fetchJWT,v=Object(l.useState)(),O=Object(u.a)(v,2),x=O[0],y=O[1],S=Object(l.useState)("sync"),P=Object(u.a)(S,2),_=P[0],A=P[1],N=Object(l.useState)(!1),T=Object(u.a)(N,2),q=T[0],F=T[1],J=window.innerWidth<=500,W=Object(l.useState)(!1),G=Object(u.a)(W,2),H=G[0],M=G[1],L=Object(l.useState)([]),D=Object(u.a)(L,2),K=D[0],U=D[1],V=Object(l.useState)("anon"),Y=Object(u.a)(V,2),Z=Y[0],$=Y[1],Q=Object(l.useState)("https://ipfs.io/ipfs/QmVAiRHjVLPJYnf7jCpVeqrqRBE7HFN9nm5ZB2QSZ5BY52"),X=Object(u.a)(Q,2),ee=X[0],te=X[1],ne=d.a.createRef(),re=Object(l.useState)({}),ae=Object(u.a)(re,2),se=(ae[0],ae[1]),ce=Object(l.useState)(),ie=Object(u.a)(ce,2),oe=ie[0],ue=ie[1],le=Object(l.useState)(),de=Object(u.a)(le,2),fe=de[0],pe=de[1],he=Object(l.useState)(),je=Object(u.a)(he,2),be=je[0],me=je[1],ve=Object(l.useState)(),Oe=Object(u.a)(ve,2),xe=Oe[0],we=Oe[1];E.emit("username",Z),E.emit("avatar",ee),Object(l.useEffect)((function(){p(),n(x?x.address:"").then((function(e){e&&(E.emit("username",e.username),E.emit("avatar",e.avatar),$(e.username),te(e.avatar))}))}),[n,x,p]);var ye=Object(l.useCallback)((function(e,t,n){var r=Object(u.a)(t,2),a=r[0],s=r[1],c=window.innerWidth,l=window.innerHeight,d=c*a,f=l*s;se((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},t[e]),{},{x:d,y:f,avatar:n.avatar,username:n.name})))}))}),[]);Object(l.useEffect)((function(){var e=function(e){se((function(t){var n=Object(o.a)({},t);return delete n[e],n}))};return E.on("roommate disconnect",e),E.on("cursor move",ye),function(){E.off("roomate disconnect",e),E.off("cursor move",ye)}}),[ye]),Object(l.useEffect)((function(){function e(e,n,r){return t.apply(this,arguments)}function t(){return(t=Object(c.a)(s.a.mark((function e(t,n,r){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://hdapi.teztools.io/v1/graphql",{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:n})});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(c.a)(s.a.mark((function t(n){var r,a,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(B,"collectorGallery",{address:n});case 2:return r=t.sent,a=r.errors,c=r.data,a&&console.error(a),i=c?c.hic_et_nunc_token_holder:null,U(i),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}x&&function(e){n.apply(this,arguments)}(x.address)}),[x]);var ge=function(e,t){if(void 0===e)return"";switch(t){case"HIC":return e.replace("ipfs://","https://pinata.hicetnunc.xyz/ipfs/");case"CLOUDFLARE":return e.replace("ipfs://","https://cloudflare-ipfs.com/ipfs/");case"PINATA":return e.replace("ipfs://","https://gateway.pinata.cloud/ipfs/");case"IPFS":return e.replace("ipfs://","https://ipfs.io/ipfs/");case"INFURA":try{var n=new ipfsClient.CID(e.replace("ipfs://","")).toV1().toBaseEncodedString("base32");return"https://".concat(n,".ipfs.infura-ipfs.io/")}catch(r){return}case"DWEB":return e.replace("ipfs://","http://dweb.link/ipfs/");default:return console.error("please specify type"),e}};function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n            {\n              reverseRecord(address: "'+t+'"){owner domain{name}}\n            }\n            ',variables:{}})}).then((function(e){return e.json()})).then((function(e){e.data.reverseRecord&&(n=e.data.reverseRecord.domain.name,A(n),$(n))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=Object(l.useMemo)((function(){return w.a.throttle((function(e){E.emit("cursor move",{x:e[0],y:e[1]})}),5)}),[]),Pe=Object(l.useCallback)((function(e){var t=e.clientX,n=e.clientY,r=window.innerWidth,a=window.innerHeight;Ce([(t-60)/r,(n-60)/a]),ne.current&&(ne.current.style.left=t+20+"px",ne.current.style.top=n+20+"px")}),[Ce,ne]);function _e(){return(_e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,I.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),x&&I.clearActiveAccount().then(Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,I.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),A("sync"),$("anon"),F(!1);case 8:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return ze.apply(this,arguments)}function ze(){return(ze=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,I.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!x){e.next=12;break}return A(x.address),F(!0),ke(x.address),e.abrupt("return",x);case 12:return e.prev=12,console.log("Requesting permissions..."),e.next=16,I.requestPermissions();case 16:return t=e.sent,e.t2=y,e.next=20,I.getActiveAccount();case 20:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),A(t.address),F(!0),ke(t.address),e.next=31;break;case 28:e.prev=28,e.t4=e.catch(12),console.log("Got error:",e.t4);case 31:case"end":return e.stop()}}),e,null,[[12,28]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){window.addEventListener("mousemove",Pe)}),[Pe]),Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,I.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),x?(A(x.address.slice(0,6)+"..."+x.address.slice(32,36)),$(x.address.slice(0,6)+"..."+x.address.slice(32,36)),F(!0),ke(x.address)):(A("sync"),F(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{avatar:ee,userCursorRef:ne,username:Z}),Object(r.jsxs)("div",{style:{height:"100vh"},children:[Object(r.jsx)("div",{className:"top-left",style:{fontSize:J?"1em":"1.5em",display:"flex",alignItems:"center"},children:"SUP"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(h.a,{id:"standard-basic",label:"Receiver Address",variant:"standard",fullWidth:!0,value:oe,onChange:function(e){ue(e.target.value)}}),Object(r.jsx)(h.a,{id:"standard-basic",label:"Message",variant:"standard",fullWidth:!0,multiline:!0,value:fe,onChange:function(e){pe(e.target.value)}}),Object(r.jsx)(j.a,{size:J?"small":"medium",title:"unsync",onClick:Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(x.address,oe,fe);case 2:t=e.sent,we(t.metadataUri),me(t.artifacthash);case 5:case"end":return e.stop()}}),e)}))),children:"Preview  "}),be&&Object(r.jsx)("div",{children:Object(r.jsx)("iframe",{src:"https://ipfs.io/ipfs/"+be,scrolling:"no",width:"100%",height:500})}),be&&Object(r.jsx)(j.a,{size:J?"small":"medium",title:"unsync",onClick:Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.wallet.at("KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9").then((function(e){return e.methods.mint_OBJKT(x.address,1,xe.split("").reduce((function(e,t){return e+t.charCodeAt(0).toString(16).padStart(2,"0")}),""),100).send({amount:0,storageLimit:310})})).then((function(e){return e.confirmation(1).then(Object(c.a)(s.a.mark((function t(){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),n=e._operationResult._events[0][0].metadata.internal_operation_results[0].parameters.value.args[1].args[0].int,t.next=4,z.wallet.at("KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton");case 4:return r=t.sent,t.next=7,r.methods.transfer([{from_:x.address,txs:[{to_:oe,token_id:n,amount:1}]}]).send();case 7:a=t.sent,console.log(a);case 9:case"end":return t.stop()}}),t)}))))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),children:"Mint & Send"})]}),Object(r.jsxs)("div",{className:"bottom",style:{position:"absolute"},children:[Object(r.jsx)("div",{children:H&&Object(r.jsx)("div",{className:"panel",style:{display:"flex",width:"100%",overflowY:"auto"},children:K&&K.map((function(t){var n=t.token;return Object(r.jsx)(b.a,{onClick:function(){te(ge(n.display_uri,"IPFS")),E.emit("avatar",ge(n.display_uri,"IPFS")),a(x.address,Z,ge(n.display_uri,"IPFS"))},children:Object(r.jsx)(m.a,{variant:"rounded",src:ge(n.display_uri,"IPFS"),alt:n.id,className:e.sizeBig})},n.id)}))})}),Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)("div",{style:{marginRight:"auto"},children:Object(r.jsxs)(j.a,{title:"Adventure Networks",size:J?"small":"medium",onClick:Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(x.address);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)}))),children:["  ",Object(r.jsxs)("div",{style:{textAlign:"left"},children:[" Adventure ",Object(r.jsx)("br",{}),"Networks "]})," "]})}),Object(r.jsx)("div",{style:{display:"flex",alignItems:"end",justifyContent:"flex-end"},children:Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[q&&Object(r.jsxs)(j.a,{size:J?"small":"medium",title:"unsync",onClick:function(){!function(){_e.apply(this,arguments)}()},children:[Object(r.jsx)("u",{children:"unsync"})," "]}),q&&Object(r.jsx)("div",{children:" | "}),Object(r.jsxs)(j.a,{title:"sync",size:J?"small":"medium",onClick:Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae();case 2:case"end":return e.stop()}}),e)}))),children:[Object(r.jsx)("u",{children:_})," "]}),q&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:" | "}),Object(r.jsx)(j.a,{size:J?"small":"medium",title:"unsync",onClick:function(){M(!H)},children:Object(r.jsx)(m.a,{variant:"rounded",src:ee,alt:"change avatar",className:e.sizeSmall})})]})]})})]})]})]})]})},B='\nquery collectorGallery($address: String!) {\n  hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, token: {creator: {address: {_neq: $address}}}, quantity: {_gt: "0"}}, order_by: {token_id: desc}) {\n\ttoken {\n\t  id\n\t  artifact_uri\n\t  display_uri\n\t  thumbnail_uri\n\t  timestamp\n\t  mime\n\t  title\n\t  description\n\t  supply\n\t  royalties\n\t  creator {\n\t\taddress\n\t  }\n\t}\n  }\n}\n',F=n(34),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,590)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};n.n(F).a.render(Object(r.jsx)(S,{children:Object(r.jsx)(P,{children:Object(r.jsx)(q,{})})}),document.getElementById("root")),J()}},[[532,1,2]]]);
//# sourceMappingURL=main.d41ea41c.chunk.js.map